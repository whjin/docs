缓存分为两种：强缓存和协商缓存，根据响应的`header`内容来决定。

|缓存类型|状态码|发送请求到服务器|
|-------|-----|--------------|
|强缓存|`200`（`From Cache`）|否，直接从缓存取|
|协商缓存|`304`（`Not Modified`）|是，通过服务器来告知缓存是否可用|

强缓存字段：`expires`、`cache-control`。`cache-control`与`expires`同时存在，`cache-control`的优先级高于`expires`。

协商缓存字段：`Last-Modified/If-Modified-Since`、`Etag/If-None-Match`

`Cache-Control`使用相对时间，`Expires`使用基于服务器的绝对时间，一般采用`Cache-Control`，在请求设置了缓存的数据时，会先查看是否过期，如果没有过期直接使用本地缓存，过期则请求并在服务器校验文件是否修改，如果上一次响应设置了`Etag`值会在这次请求的时候作为`If-None-Match`的值交给服务器校验，如果一致，继续校验`Last-Modified`，没有设置`Etag`则直接验证`Last-Modified`，再决定是否返回`304`。

![](https://s1.ax1x.com/2022/10/12/xUlTsA.png)

