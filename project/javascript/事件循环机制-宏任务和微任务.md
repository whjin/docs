`JS`有两种任务的执行模式：同步模式和异步模式。

在异步模式下，创建异步任务主要分为宏任务与微任务两种。`ES6`规范中，宏任务成为`Task`，微任务成为`Jobs`。

宏任务是由宿主（浏览器、`Node`环境）发起，而微任务由`JS`引擎自身发起。

- 宏任务：
    - `JS`中主栈执行的大多数的任务。（定时器、事件绑定、`ajax`、回调函数、`Node.js`的`fs`模块）
    - `script`、`setTimeout`、`setInterval`、`setImmediate`（`Node`环境）、`UI`事件，`I/O`(`Node.js`)、`ajax`网络请求
    
- 微任务：`Promise`、`async/await`、、`process.nextTick`（`Node.js`）、`MutationObserver`

宏任务和微任务的执行顺序

- 主栈队列就是一个宏任务，每一个宏任务执行完就会执行宏任务中的微任务，知道微任务全部都执行完，才开始执行下一个宏任务
- `JS`中任务的执行顺序优先级：主栈全局任务（宏任务）-->宏任务中的微任务-->下一个宏任务。所以，`Promise`（微任务）的执行顺序优先级高于`setTimeout`定时器


在`JS`中任务会分为同步任务和异步任务。

如果是同步任务，则会在主线程（也就是`JS`引擎线程）上进行执行，形成一个执行栈。但是一旦遇到异步任务，则会将这些异步任务交给异步模块处理，然后主线程继续执行后面的同步代码。

当异步任务有了运行结果后，就会在任务队列里放置一个事件，这个任务队列由事件触发线程来进行管理。

一旦执行栈中所有的同步任务执行完毕，当前的主线程（`JS`引擎线程）空闲，系统就会读取任务队列，将可以运行的异步任务添加到执行栈中，开始执行。

在`JS`任务队列中的任务可以分为宏任务和微任务。

宏任务可以理解为每次执行栈所执行的代码就是一个宏任务，包括每次从事件队列中获取一个事件回调并放到执行栈中所执行的任务。

微任务可以理解为当前宏任务执行结束后立即执行的任务。